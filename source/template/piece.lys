{% from "util.lys" import
   prelude, logo, scoreConfig, paperLayout, pieceTitleMarkup, pieceScore %}

{{ prelude() }}

{% macro pieceHfMarkup() %}
  print-first-page-number = ##t
  oddHeaderMarkup = \markup { }
  oddFooterMarkup = \markup {
    \if \on-last-page
      \fill-line {
        \null \fromproperty #'header:tagline
        \fromproperty #'page:page-number-string
      }
    \fill-line { \null \fromproperty #'page:page-number-string }
  }
  evenHeaderMarkup = \markup { }
  evenFooterMarkup = \markup {
    \if \on-last-page
      \fill-line {
        \null \fromproperty #'header:tagline
        \fromproperty #'page:page-number-string
      }
    \fill-line { \null \fromproperty #'page:page-number-string }
  }
{% endmacro %}

\layout {
  \context {
    {{ scoreConfig() }}
  }
}

\paper {
  {{ paperLayout() }}
  {{ pieceHfMarkup() }}
  {{ pieceTitleMarkup() }}
}

\header {
  tagline = \markup { {{ logo(0.5) }} \with-url \rootUrl \rootUrl }
}

{{ pieceScore(piece, args) }}
